go :-
    retractall(yes(_)),  % Remove any previous diagnosis answers
    retractall(no(_)),
    write('What is the patient\'s name? '),
    read(PatientName),
    write('What is your age? '),
    read(PatientAge),
    (hypothesis(Disease)  % Check for a diagnosis
    ->
        nl,
        write('Name: '),
        write(PatientName),
        nl,
        write('Age: '),
        write(PatientAge),
        nl,
        write('Based on the description and symptoms above, it is suggested that the patient is suffering from '),
        write(Disease),
        nl,
        diagnose_again  % Ask the user if they want to diagnose again
        ;
        write('Sorry, the system is unable to identify the disease'),
        nl,
        diagnose_again).

    diagnose_again :-
        nl,
        write('Do you want to perform another diagnosis? (yes or no)'),
        nl,
        read(Response),
        ((Response == yes ; Response == y)
        ->
        go
        ;
        write('Thank you for using the diagnosis system.')).
    
    % Disease 1: Filariasis
    hypothesis(filariasis) :-
        (symptom('fever') ;
        symptom('coughing');
        symptom('shortness of breath') ;
        symptom('wheezing')),
        symptom('pain and swelling of the genitalia (breast, vagina or scrotum)'),
        symptom('pain and swelling of the legs and arms'),
        nl,
        nl,
        nl,
        write('Description:'),
        nl,
        write('Lymphatic filariasis, considered globally as a neglected tropical disease (NTD), is a parasitic disease caused by microscopic, thread-like worms. The adult worms only live in the human lymph system. The lymph system maintains the body’s fluid balance and fights infections. Lymphatic filariasis is spread from person to person by mosquitoes.'),
        nl,
        write('Symptoms:'),
        nl,
        nl,
        write('Pain and swelling of the breast, vagina, scrotum, legs and arms:  Fluid collection because of improper functioning of the lymph system.'),
        nl,
        write('Fever, Coughing, shortness of breath, and wheezing: Filarial infection can also cause tropical pulmonary eosinophilia  syndrome, although this syndrome is typically found in persons living with the disease in Asia. Eosinophilia is the presence of higher than normal disease-fighting white blood cells in the body.'),
        nl,
        nl,
        write('To confirm this diagnosis, the following test is recommended:'),
        nl,
        write('Microscopic Examination: Identification of microfilariae in a blood smear.'),
        nl,
        nl,
        write('Suggested Treatment:'),
        nl,
        write('DEC (Diethylcarbamazine Citrate) and Albendazole- Selective treatment with DEC (Diethylcarbamazine Citrate) is given to people with clinical manifestations of the disease. Mass treatment of the people living in established endemic areas. Medicines (DEC and albendazole) are given once a year for 5 years.'),
        nl,
        nl,
        write('For Future Prevention:'),
        nl,
        write('1: Wear a long sleeve shirt and long pants when working in farms or areas endemic to filariasis.'),
        nl,
        write('2: Sleep under a mosquito net.'),
        nl, !.
    
    % Disease 2: Chicken Pox
    hypothesis('chicken pox') :-
        (symptom('fever');
        symptom('tiredness');
        symptom('loss of appetite');
        symptom('headache')),
        symptom('fluid-filled blisters'),
        symptom('rash'),
        nl,
        nl,
        write('Description:'),
        nl,
        write('Chickenpox is a highly contagious disease caused by the varicella-zoster virus (VZV). It can cause an itchy, blister-like rash among other symptoms. The rash first appears on the chest, back, and face, and then spreads over the entire body.
        Chickenpox can be serious, especially during pregnancy, in babies, adolescents, adults, and people with weakened immune systems (lowered ability to fight germs and sickness).'),
        nl,
        write('Symptoms:'),
        nl,
        nl,
        write('1: Rashes and Fluid-filled blisters'),
        nl,
        write('2: Fever'),
        nl,
        write('3: Tiredness'),
        nl,
        write('4: Loss of Appetite'),
        nl,
        write('5: Headache'),
        nl,
        nl,
        write('To confirm this diagnosis, the following test is recommended:'),
        nl,
        write('Use of polymerase chain reaction (PCR) to detect VZV in skin lesions (vesicles, scabs, maculopapular lesions). Vesicular lesions or scabs, if present, are the best for sampling.'),
        nl,
        nl,
        write('Suggested Treatment:'),
        nl,
        write('1: Calamine lotion and a cool bath with added baking soda, uncooked oatmeal, or colloidal oatmeal may help relieve some of the itching.'),
        nl,
        write('2: Use non-aspirin medications, such as acetaminophen, to relieve fever from chickenpox.'),
        nl,
        write('3: Antiviral medications are recommended for people with chickenpox that are more likely to develop serious illness, including:'),
        nl,
        write('a: Otherwise healthy people older than 12 years of age'),
        nl,
        write('b: People with chronic skin or lung disease'),
        nl,
        write('c: People receiving long-term salicylate therapy or steroid therapy'),
        nl,
        write('d: People who are pregnant'),
        nl,
        write('e: People with a weakened immune system'),
        nl,
        nl,
        write('For Future Prevention:'),
        nl,
        write('Chickenpox Vaccine (Two doses):  If a vaccinated person does get chickenpox, the symptoms are usually milder with fewer or no blisters (they may have just red spots) and low or no fever.'),
        nl, !.
        
    % Disease 3: Dengue Fever
    hypothesis('dengue fever') :-
        (symptom('nausea or vomiting'),
        symptom('rash');
        symptom('eye, muscle and bone pain');
        symptom('belly pain')),
        symptom('fever'),
        symptom('bleeding from nose or gums'),
        nl,
        nl,
        write('Description:'),
        nl,
        write('Dengue viruses are spread to people through the bite of an infected Aedes species 
            (Ae. aegypti or Ae. albopictus) mosquito. These mosquitoes also spread Zika, chikungunya, 
            and other viruses. Dengue viruses are spread to people through the bite of an 
            infected Aedes species (Ae. aegypti or Ae. albopictus) mosquito. 
            These mosquitoes also spread Zika, chikungunya, and other viruses.'),
        nl,
        nl,
        write('Symptoms:'),
        nl,
        write('1: Fever'),
        nl,
        write('2: Nausea or vomiting'),
        nl,
        write('3: Rash'),
        nl,
        write('4: Eye, muscle and bone pain'),
        nl,
        write('5: Belly pain'),
        nl,
        write('6: Bleeding from nose or gums'),
        nl,
        nl,
        write('To confirm this diagnosis, the following test is recommended:'),
        nl,
        write('A blood test is the only way to confirm the diagnosis.'),
        nl,
        nl,
        write('Suggested Treatment:'),
        nl,
        write('1: Rest as much as possible'),
        nl,
        write('2: Give paracetamol to control fever and relieve pain. Always follow product label instructions. Do not give ibuprofen, aspirin, or aspirin-containing drugs.'),
        nl,
        write('3: Cool the person’s skin with cold cloth to reduce fever.'),
        nl,
        write('4: Prevent dehydration – Dehydration occurs when a person loses too much body fluid from fever, vomiting, or not drinking enough liquids.'),
        nl,
        write('5: Severe Case: Requires immediate hospitalization'),
        nl,
        nl,
        write('For Future Prevention:'),
        nl,
        write('1: Remove standing water where mosquitoes could lay eggs'),
        nl,
        write('2: Kill mosquitoes outside your home'),
        nl, !.
    
    % Disease 4: Amoebiasis
    hypothesis('amoebiasis') :-
        (symptom('stomach pain');
        symptom('fever')),
        symptom('loose feces'),
        symptom('bloody stools'),
        nl,
        nl,
        write('Description:'),
        nl,
        write('Amoebiasis or amoebic dysentery is a common parasitic enteral infection. It is caused by any of the amoebas of the Entamoeba group. If the parasite reaches the bloodstream, it can spread through the body and end up in the liver, causing amoebic liver abscesses. Liver abscesses can occur without previous diarrhea. Diagnosis is typically by stool examination using a microscope. An increased WBC count may be present. The most accurate test is specific antibodies in the blood.'),
        nl,
        nl,
        write('Symptoms:'),
        nl,
        write('1: Loose Feces'),
        nl,
        write('2: Stomach Pain'),
        nl,
        write('3: Bloody stools'),
        nl,
        write('4: Fever'),
        nl,
        nl,
        write('To confirm this diagnosis, the following test is recommended:'),
        nl,
        write('Examination of stools (poop) under a microscope Because E. histolytica is not always found in every stool sample, you may be asked to submit several stool samples from several different days.'),
        nl,
        nl,
        write('Suggested Treatment:'),
        nl,
        write('1: Metronidazole'),
        nl,
        write('2: Tinidazole'),
        nl,
        write('3: Nitazoxanide'),
        nl,
        write('4: Dehydroemetine'),
        nl,
        write('5: Chloroquine'),
        nl,
        nl,
        write('For Future Prevention:'),
        nl,
        write('Practice good sanitation practices'),
        nl,
        write('Drink only safe to drink water'),
        nl, !.
    
    % Disease 5: GERD
    hypothesis('Gastroesophageal reflux disease') :-
        (symptom('abdominal pain');
        symptom('dysphagia or trouble swallowing');
        symptom('throat lumps')),
        symptom('burning sensation or heartburn'),
        symptom('backwash of sour liquid'),
        nl,
        nl,
        write('Description:'),
        nl,
        write('Gastroesophageal reflux disease (GERD) occurs when stomach acid repeatedly flows back into the tube connecting your mouth and stomach (esophagus). This backwash (acid reflux) can irritate the lining of your esophagus.'),
        nl,
        nl,
        write('Symptoms:'),
        nl,
        write('1: Burning Sensation or Heartburn'),
        nl,
        write('2: Backwash of sour liquid'),
        nl,
        write('3: Abdominal pain'),
        nl,
        write('4: Dysphagia or Trouble swallowing'),
        nl,
        write('5: Throat Lump'),
        nl,
        nl,
        write('To confirm this diagnosis, the following test is recommended:'),
        nl,
        write('1: Upper endoscopy: Your doctor inserts a thin, flexible tube equipped with a light and camera (endoscope) down your throat'),
        nl,
        write('2: Ambulatory acid (pH) probe test: A monitor is placed in your esophagus to identify when, and for how long, stomach acid regurgitates there.'),
        nl,
        write('3: X-ray of the upper digestive system: X-rays are taken after you drink a chalky liquid that coats and fills the inside lining of your digestive tract.'),
        nl,
        write('4: Esophageal manometry: This test measures the rhythmic muscle contractions in your esophagus when you swallow'),
        nl,
        write('5: Transnasal esophagoscopy: A thin, flexible tube with a video camera is put through your nose and moved down your throat into the esophagus.'),
        nl,
        nl,
        write('Suggested Treatment:'),
        nl,
        write('1: Antacids that neutralize stomach acid'),
        nl,
        write('2: Medications to reduce acid production:  Histamine (H-2) blockers do not act as quickly as antacids, but they provide longer relief and may decrease acid production from the stomach for up to 12 hours'),
        nl,
        write('3: Medications that block acid production and heal the esophagus: Proton pump inhibitors are stronger acid blockers than H-2 blockers and allow time for damaged esophageal tissue to heal.'),
        nl,
        nl,
        write('For Future Prevention:'),
        nl,
        write('1: Maintain a healthy weight'),
        nl,
        write('2: Stop smoking'),
        nl, !.
    
    % Disease 6: Tuberculosis
    hypothesis('tuberculosis') :-
        (symptom('fever');
        symptom('night sweats')),
        symptom('chest pain'),
        symptom('coughing up of blood'),
        nl,
        nl,
        write('Description:'),
        nl,
        write('Tuberculosis (TB) is a disease caused by germs that are spread from person to person through the air. TB usually affects the lungs, but it can also affect other parts of the body, such as the brain, the kidneys, or the spine. A person with TB can die if they do not get treatment.'),
        nl,
        nl,
        write('Symptoms:'),
        nl,
        write('1: Coughing'),
        nl,
        write('2: Chest pain'),
        nl,
        write('3: Coughing up of blood'),
        nl,
        write('4: Fever'),
        nl,
        write('5: Night Sweats'),
        nl,
        nl,
        write('To confirm this diagnosis, the following test is recommended:'),
        nl,
        write('1: A positive TB skin test or TB blood test only tells that a person has been infected with TB bacteria. It does not tell whether the person has latent TB infection (LTBI) or has progressed to TB disease.'),
        nl,
        write('2: Other tests, such as a chest x-ray and a sample of sputum, are needed to see whether the person has TB disease.'),
        nl,
        nl,
        write('Suggested Treatment:'),
        nl,
        write('1: Isoniazid'),
        nl,
        write('2: Rifampin'),
        nl,
        write('3: Ethambutol'),
        nl,
        write('4: Pyrazinamide'),
        nl,
        nl,
        write('For Future Prevention:'),
        nl,
        write('1: Good ventilation: as TB can remain suspended in the air for several hours with no ventilation.'),
        nl,
        write('2: Natural light: UV light kills off TB bacteria.'),
        nl,
        write('3: Good hygiene: covering the mouth and nose when coughing or sneezing reduces the spread of TB bacteria.'),
        nl, !.
    
    % Disease 7: Rabies
    hypothesis('rabies') :-
        (symptom('hyrdophobia and insomnia');
        symptom('fever');
        symptom('headache');
        symptom('itching')),
        symptom('cerebal dysfunction'),
        symptom('anxiety, confusion and agitiation'),
        symptom('delirium and hallicinations'),
        nl,
        nl,
        write('Description:'),
        nl,
        write('Rabies is a preventable viral disease most often transmitted through the bite of a rabid animal. The rabies virus infects the central nervous system of mammals, ultimately causing disease in the brain and death.'),
        nl,
        nl,
        write('Symptoms:'),
        nl,
        write('1: Fever'),
        nl,
        write('2: Headache'),
        nl,
        write('3: Cerebral dysfunction, Anxiety, Confusion, and Agitation'),
        nl,
        write('4: Delirium, Abnormal behavior, Hallucinations'),
        nl,
        write('5: Hydrophobia (fear of water), and Insomnia'),
        nl,
        nl,
        write('To confirm this diagnosis, the following test is recommended:'),
        nl,
        write('1: Saliva from the nape of the neck can be tested by virus isolation or reverse transcription followed by polymerase chain reaction (RT-PCR).'),
        nl,
        write('2: Skin biopsy specimens are examined for rabies antigen in the cutaneous nerves at the base of hair follicles.'),
        nl,
        nl,
        write('Suggested Treatment:'),
        nl,
        write('There is no currently effective treatment for this.'),
        nl,
        nl,
        write('For Future Prevention:'),
        nl,
        write('1: Keeping your pets up to date on their rabies vaccination will prevent them from acquiring the disease from wildlife, and thereby prevent possible transmission to your family or other people.'),
        nl,
        write('2: If you do come into contact with a rabid animal, rabies in humans is 100% preventable through prompt rabies vaccination.'),
        nl,
        write('3: Good hygiene: covering the mouth and nose when coughing or sneezing reduces the spread of TB bacteria.'),
        nl, !.

    % Disease 8: Tetanus
    hypothesis('tetanus') :-
        (symptom('headache');
        symptom('fever');
        symptom('sweating');
        symptom('changes in blood pressure and heart rate')),
        symptom('sudden, involuntary muscle spasms - often in the stomach'),
        symptom('painful muscle stiffness all over the body'),
        symptom('trouble swallowing'),
        symptom('seizures (jerking or staring)'),
        nl,
        nl,
        write('Description:'),
        nl,
        write('Tetanus is an infection caused by bacteria called Clostridium tetani. When these bacteria enter the body, they produce a toxin that causes painful muscle contractions. Another name for tetanus is “lockjaw”. It often causes a person’s neck and jaw muscles to lock, making it hard to open the mouth or swallow.'),
        nl,
        nl,
        write('Symptoms:'),
        nl,
        write('1: Jaw Cramping'),
        nl,
        write('2: Sudden, involuntary muscle spasms — often in the stomach'),
        nl,
        write('3: Painful muscle stiffness all over the body'),
        nl,
        write('4: Trouble swallowing'),
        nl,
        write('5: Seizures (jerking or staring)'),
        nl,
        write('6: Headache'),
        nl,
        write('7: Fever and sweating'),
        nl,
        write('8: Changes in blood pressure and heart rate'),
        nl,
        nl,
        write('To confirm this diagnosis, the following test is recommended:'),
        nl,
        write('1: Ask about recent history of cuts, scrapes, punctures, and trauma, and examining someone for certain signs and symptoms.'),
        nl,
        write('Note: No hospital lab tests that can confirm tetanus.'),
        nl,
        nl,
        write('Suggested Treatment:'),
        nl,
        write('1: Evaluation and care in the hospital'),
        nl,
        write('2: Immediate treatment with medicine called human tetanus immune globulin (TIG)'),
        nl,
        write('3: Aggressive wound care'),
        nl,
        write('4: Drugs to control muscle spasms'),
        nl,
        write('5: Antibiotics'),
        nl,
        write('6: Tetanus vaccination'),
        nl,
        nl,
        write('For Future Prevention:'),
        nl,
        write('1: Tetanus Vaccination'),
        nl,
        write('2: Good wound care:'),
        nl,
        write('2.1: Apply first aid to even minor, non-infected wounds like blisters, scrapes, or any break in the skin.'),
        nl,
        write('2.1: Wash hands often with soap and water or use an alcohol-based hand rub if washing is not possible.'),
        nl, !.

        
    % Disease 9: Asthma
    hypothesis('asthma') :-
        (symptom('coughing');
        symptom('chest tightness')),
        symptom('trouble breathing'),
        symptom('wheezing'),
        nl,
        nl,
        write('Description:'),
        nl,
        write('Asthma is a disease that affects your lungs. It is one of the most common long-term diseases of children, but adults can have asthma, too. The asthma attack happens in your body’s airways, which are the paths that carry air to your lungs. As the air moves through your lungs, the airways become smaller, like the branches of a tree are smaller than the tree trunk. Less air gets in and out of your lungs, and mucous that your body makes clogs up the airways.. If you have asthma, you have it all the time, but you will have asthma attacks only when something bothers your lungs.'),
        nl,
        nl,
        write('Symptoms:'),
        nl,
        write('1: Coughing'),
        nl,
        write('2: Chest tightness'),
        nl,
        write('3: Wheezing'),
        nl,
        write('4: Trouble breathing'),
        nl,
        nl,
        write('To confirm this diagnosis, the following test is recommended:'),
        nl,
        write('Sprirometry: A breathing test to find out how well your lungs are working by testing how much air you can breathe out after taking a very deep breath before and after you use asthma medicine.'),
        nl,
        nl,
        write('Suggested Treatment:'),
        nl,
        write('1: Quick Relief Medicines can help control the symptoms of an asthma attack.'),
        nl,
        write('1.1: Asthma Inhalers are one form of quick-relief medicines and should be prescribed by your doctorr'),
        write('2: Long-term Control Medicines help you have fewer and milder attacks, but they don’t help you while you are having an asthma attack.'),
        nl,
        nl,
        write('For Future Prevention'),
        nl,
        write('1: Asthma as a disease itself cannot be prevented but one can avoid common triggers to lessen asthma attacks'),
        nl,!.
        

    % Disease 10: Acute Gastroenteritis
    hypothesis('acute gastroenteritis') :-
        (symptom('fever');
        symptom('fatigue');
        symptom('nausea');
        symptom('vomiting')),
        symptom('diarrhea'),
        symptom('abdominal pain'),
        nl,
        nl,
        write('Description:'),
        nl,
        write('Acute gastroenteritis, known colloquially as a stomach bug, is an intestinal inflammation following an infection that affects the mucous membranes present in the stomach and intestine. This condition is due, in the vast majority of cases, to a virus or, more rarely, a bacterium. '),
        nl,
        nl,
        write('Symptoms:'),
        nl,
        write('1: Fever'),
        nl,
        write('2: Fatigue'),
        nl,
        write('3: Nausea or Vomiting'),
        nl,
        write('4: Diarrhea'),
        nl,
        write('5: Abdominal pain'),
        nl,
        nl,
        write('To confirm this diagnosis, the following test is recommended:'),
        nl,
        write('In case of an episode lasting beyond one week or where symptoms are poorly tolerated, a doctor will order a blood and stool exam so as to search for a possible bacterial infection.'),
        nl,
        nl,
        write('Suggested Treatment:'),
        nl,
        write('1: Recommended Bed Rest'),
        nl,
        write('2: No medication needed  '),
        nl,
        write('3: Anti-diarrheal or Emetic Drugs (for severe cases)'),
        nl,
        nl,
        write('For Future Prevention'),
        nl,
        write('1: Practice simple things like washing your hands routinely with soap and water, after using the toilet, or after contact with an infected person'),
        nl,
        write('2: Wash fruits and vegetables before eating them.'),
        nl,!.
    
    
    ask(Question) :-
        write('Is the patient suffering from '),
        write(Question),
        write('? '),
        prompt(_, ''),
        read(Response),
        ((Response == yes ; Response == y) ->
            assert(yes(Question)) ;
            assert(no(Question)), fail).
                :- dynamic yes/1,no/1.
    
    symptom(S) :-
        (yes(S) ->true;
        (no(S) ->fail;
        ask(S))).
    
    undo :- retract(yes( )),fail.
    undo :- retract(no( )),fail.
    undo.
